<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuanto CuestApp</title>
    <!-- Cargamos Tailwind CSS desde un CDN para los estilos sin necesidad de instalarlo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Pequeño fix para ocultar elementos dinámicamente */
        .hidden { display: none !important; }
    </style>
</head>
<body class="min-h-screen bg-slate-50 flex items-center justify-center p-4 font-sans text-slate-800">

    <div class="bg-white rounded-3xl shadow-xl w-full max-w-lg landscape:max-w-4xl lg:landscape:max-w-lg overflow-hidden border border-slate-100 transition-all duration-500">
        
        <!-- Header -->
        <div class="bg-emerald-600 p-6 text-white text-center">
            <div class="flex justify-center mb-3">
                <!-- Ícono Clock -->
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-200">
                    <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                </svg>
            </div>
            <h1 class="text-2xl font-bold tracking-tight">Cuanto CuestApp</h1>
            <p class="text-emerald-100 text-sm mt-1">Descubre cuánto vale tu tiempo</p>
        </div>

        <div class="p-6 md:p-8 grid grid-cols-1 landscape:grid-cols-2 lg:landscape:grid-cols-1 gap-8">
            
            <!-- Sección 1: El costo del producto -->
            <section class="space-y-4">
                <h2 class="text-lg font-semibold flex items-center gap-2 text-slate-700">
                    <!-- Ícono ShoppingBag -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-500">
                        <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/>
                    </svg>
                    Precio del producto
                </h2>

                <div>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <!-- Ícono DollarSign -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                                <line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <input
                            type="text"
                            inputmode="numeric"
                            id="productPrice"
                            placeholder="Ej. 50.000"
                            class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all outline-none text-lg"
                        />
                    </div>
                    <p id="warningMessage" class="hidden text-orange-500 text-sm mt-2 flex items-center gap-1">
                        * Primero configura tu sueldo y horas.
                    </p>
                </div>

                <!-- Resultado Final -->
                <div id="resultContainer" class="rounded-2xl p-6 text-center transition-all duration-300 bg-slate-100 text-slate-400">
                    <p class="text-sm font-medium mb-2 opacity-90">Ese producto cuesta</p>
                    <div id="timeNeeded" class="text-3xl font-bold mb-1">0 h</div>
                    <p class="text-sm opacity-80 mt-2">de trabajo</p>
                </div>
            </section>

            <!-- Sección 2: Tu ingreso -->
            <section class="space-y-4">
                <h2 class="text-lg font-semibold flex items-center gap-2 text-slate-700">
                    <!-- Ícono Wallet -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-emerald-500">
                        <path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a8 8 0 0 1-5 7.96V22a1 1 0 0 1-1 1H5a2 2 0 0 1-2-2V7Z"/><path d="M22 13v-2"/><path d="M22 17v-2"/>
                    </svg>
                    Calcula el valor de tu hora
                </h2>
                
                <div class="grid grid-cols-1 gap-4">
                    <!-- Input Sueldo -->
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1.5">Sueldo mensual</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                                    <line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                </svg>
                            </div>
                            <input
                                type="text"
                                inputmode="numeric"
                                id="salary"
                                placeholder="Ej. 1.000.000"
                                class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all outline-none"
                            />
                        </div>
                    </div>

                    <!-- Input Horas -->
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1.5">Horas al mes</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                                    <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                                </svg>
                            </div>
                            <input
                                type="text"
                                inputmode="numeric"
                                id="hours"
                                placeholder="Ej. 160"
                                class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all outline-none"
                            />
                        </div>
                    </div>

                    <!-- Input Jornada Laboral -->
                    <div>
                        <label class="block text-sm font-medium text-slate-600 mb-1.5">Horas por día laboral</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-400">
                                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                                </svg>
                            </div>
                            <input
                                type="text"
                                inputmode="numeric"
                                id="workDay"
                                placeholder="Ej. 8"
                                class="w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all outline-none"
                            />
                        </div>
                    </div>
                </div>

                <!-- Resultado Hora -->
                <div class="bg-emerald-50 rounded-xl p-4 flex items-center justify-between border border-emerald-100">
                    <span class="text-emerald-800 font-medium">Tu hora de trabajo vale:</span>
                    <span id="hourlyRate" class="text-xl font-bold text-emerald-700">$0.00</span>
                </div>
            </section>

        </div>
    </div>

    <!-- LÓGICA DE LA APLICACIÓN -->
    <script>
        // Referencias a elementos del DOM
        const inputSalary = document.getElementById('salary');
        const inputHours = document.getElementById('hours');
        const inputWorkDay = document.getElementById('workDay');
        const inputPrice = document.getElementById('productPrice');
        
        const outputHourlyRate = document.getElementById('hourlyRate');
        const outputTimeNeeded = document.getElementById('timeNeeded');
        const resultContainer = document.getElementById('resultContainer');
        const warningMessage = document.getElementById('warningMessage');

        // Formateador con separador de miles (.)
        const formatNumber = (val) => {
            if (!val) return '';
            const numericValue = val.toString().replace(/\D/g, '');
            return numericValue.replace(/\B(?=(\d{3})+(?!\d))/g, '.');
        };

        // Formateador de moneda
        const formatCurrency = (value) => {
            return new Intl.NumberFormat('es-AR', {
                style: 'currency',
                currency: 'ARS',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        };

        // Formateador de tiempo avanzado basado en jornada laboral
        const formatTime = (totalHours, hoursInMonth, hoursInDay) => {
            if (totalHours === 0) return '0 h';
            if (!isFinite(totalHours)) return 'Infinito';

            const HOURS_IN_DAY = hoursInDay > 0 ? hoursInDay : 8;
            const HOURS_IN_MONTH = hoursInMonth > 0 ? hoursInMonth : (HOURS_IN_DAY * 20);
            const MONTHS_IN_YEAR = 12;
            
            const HOURS_IN_YEAR = HOURS_IN_MONTH * MONTHS_IN_YEAR;
            // Calculamos cuántos días reales tiene tu mes de trabajo
            const DAYS_IN_MONTH = Math.max(1, Math.floor(HOURS_IN_MONTH / HOURS_IN_DAY));

            let years = Math.floor(totalHours / HOURS_IN_YEAR);
            let remainingHours = totalHours % HOURS_IN_YEAR;

            let months = Math.floor(remainingHours / HOURS_IN_MONTH);
            remainingHours = remainingHours % HOURS_IN_MONTH;

            let days = Math.floor(remainingHours / HOURS_IN_DAY);
            remainingHours = remainingHours % HOURS_IN_DAY;

            let h = Math.floor(remainingHours);
            let m = Math.round((remainingHours - h) * 60);

            if (m === 60) { m = 0; h += 1; }
            if (h >= HOURS_IN_DAY) { h -= HOURS_IN_DAY; days += 1; }
            if (days >= DAYS_IN_MONTH) { days -= DAYS_IN_MONTH; months += 1; }
            if (months >= MONTHS_IN_YEAR) { months -= MONTHS_IN_YEAR; years += 1; }

            const units = [
                { value: years, full: years === 1 ? 'año' : 'años', short: 'a' },
                { value: months, full: months === 1 ? 'mes' : 'meses', short: 'm' },
                { value: days, full: days === 1 ? 'día' : 'días', short: 'd' },
                { value: h, full: h === 1 ? 'hora' : 'horas', short: 'h' },
                { value: m, full: m === 1 ? 'minuto' : 'minutos', short: 'min' }
            ];

            const nonZeroUnits = units.filter(u => u.value > 0);
            if (nonZeroUnits.length === 0) return '0 h';

            const displayUnits = nonZeroUnits.slice(0, 3);

            const parts = displayUnits.map((u, index) => {
                if (index === 0) return `${u.value} ${u.full}`;
                return `${u.value}${u.short}`;
            });

            if (parts.length === 1) return parts[0];
            if (parts.length === 2) return `${parts[0]} y ${parts[1]}`;
            
            return parts.join(' ');
        };

        // Función principal para calcular y actualizar la vista
        const calculate = () => {
            // Guardar en localStorage
            localStorage.setItem('calc_salary', inputSalary.value.replace(/\./g, ''));
            localStorage.setItem('calc_hours', inputHours.value.replace(/\./g, ''));
            localStorage.setItem('calc_workday', inputWorkDay.value.replace(/\./g, ''));

            // Cálculos matemáticos
            const numSalary = parseFloat(inputSalary.value.replace(/\./g, '')) || 0;
            const numHours = parseFloat(inputHours.value.replace(/\./g, '')) || 0;
            const numWorkDay = parseFloat(inputWorkDay.value.replace(/\./g, '')) || 8; // Por defecto 8hs
            const numProductPrice = parseFloat(inputPrice.value.replace(/\./g, '')) || 0;

            const hourlyRate = numHours > 0 ? numSalary / numHours : 0;
            const timeNeeded = hourlyRate > 0 ? numProductPrice / hourlyRate : 0;

            // Actualizar vista - Valor de hora
            outputHourlyRate.textContent = hourlyRate > 0 ? formatCurrency(hourlyRate) : '$0.00';

            // Deshabilitar input de precio si no hay hora configurada
            inputPrice.disabled = hourlyRate === 0;

            // Mostrar/Ocultar advertencia
            if (hourlyRate === 0 && numProductPrice > 0) {
                warningMessage.classList.remove('hidden');
            } else {
                warningMessage.classList.add('hidden');
            }

            // Actualizar vista - Resultado Final
            if (timeNeeded > 0) {
                resultContainer.className = 'rounded-2xl p-6 text-center transition-all duration-300 bg-emerald-500 text-white shadow-lg shadow-emerald-200';
                outputTimeNeeded.textContent = formatTime(timeNeeded, numHours, numWorkDay);
            } else {
                resultContainer.className = 'rounded-2xl p-6 text-center transition-all duration-300 bg-slate-100 text-slate-400';
                outputTimeNeeded.textContent = '0 h';
            }
        };

        // Eventos para cada vez que el usuario escribe
        const handleInput = (e) => {
            e.target.value = formatNumber(e.target.value);
            calculate();
        };

        inputSalary.addEventListener('input', handleInput);
        inputHours.addEventListener('input', handleInput);
        inputWorkDay.addEventListener('input', handleInput);
        inputPrice.addEventListener('input', handleInput);

        // Inicializar con valores de localStorage (si existen)
        inputSalary.value = formatNumber(localStorage.getItem('calc_salary') || '');
        inputHours.value = formatNumber(localStorage.getItem('calc_hours') || '');
        inputWorkDay.value = formatNumber(localStorage.getItem('calc_workday') || '');
        
        // Ejecutar cálculo inicial
        calculate();

    </script>
</body>
</html>